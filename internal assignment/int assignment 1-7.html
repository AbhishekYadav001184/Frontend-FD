<!-- Task 1: Fetch and Display User Data
Objective: Test API fetching using async/await and DOM rendering.   -->

<!DOCTYPE html>
<html>
<head>
  <title>Async User Fetch</title>
  <style>
    body { font-family: Arial; max-width: 700px; margin: 30px auto; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background: #f2f2f2; }
    #spinner { display:none; margin-top: 15px; font-weight: bold; }
    button { padding: 8px 12px; }
  </style>
</head>
<body>
  <h2>Fetch Users (Async/Await)</h2>

  <button onclick="getUsers()">Refresh</button>
  <div id="spinner">Loading...</div>

  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>City</th>
      </tr>
    </thead>
    <tbody id="userBody"></tbody>
  </table>

  <script>
    async function getUsers() {
      const spinner = document.getElementById('spinner');
      const body = document.getElementById('userBody');

      spinner.style.display = 'block';
      body.innerHTML = '';

      try {
        const res = await fetch('https://jsonplaceholder.typicode.com/users');
        const data = await res.json();

        data.forEach(user => {
          body.innerHTML += `
            <tr>
              <td>${user.name}</td>
              <td>${user.email}</td>
              <td>${user.address.city}</td>
            </tr>`;
        });
      } catch (err) {
        body.innerHTML = `<tr><td colspan='3'>Error fetching data</td></tr>`;
      }

      spinner.style.display = 'none';
    }

    getUsers();
  </script>
</body>
</html>


<!-- Task 2: Random Joke Generator
Objective: Understand Promises and UI updates dynamically. -->

<!DOCTYPE html>
<html>
<head>
  <title>Random Joke Generator</title>
  <style>
    body { font-family: Arial; max-width: 600px; margin: 30px auto; text-align: center; }
    #jokeBox { margin-top: 20px; font-size: 18px; }
    button { padding: 10px 15px; margin-top: 20px; font-size: 16px; }
  </style>
</head>
<body>
  <h2>Random Joke Generator</h2>

  <div id="jokeBox">Click the button to get a joke!</div>

  <button id="btn" onclick="getJoke()">Next Joke</button>

  <script>
    function getJoke() {
      const btn = document.getElementById('btn');
      const box = document.getElementById('jokeBox');

      btn.disabled = true;     
      btn.textContent = 'Loading...';

      fetch('https://official-joke-api.appspot.com/random_joke')
        .then(res => res.json())
        .then(data => {
          box.innerHTML = `<strong>${data.setup}</strong><br><br>${data.punchline}`;
        })
        .catch(() => {
          box.textContent = 'Failed to load joke. Try again!';
        })
        .finally(() => {
          btn.disabled = false;
          btn.textContent = 'Next Joke';
        });
    }
  </script>
</body>
</html>

<!-- Task 3: Weather Information App
Objective: Combine API fetching and async functions with DOM manipulation. -->

<!DOCTYPE html>
<html>
<head>
  <title>Weather App</title>
  <style>
    body { font-family: Arial; max-width: 600px; margin: 30px auto; text-align: center; }
    input { padding: 8px; width: 60%; font-size: 16px; }
    button { padding: 8px 12px; font-size: 16px; margin-left: 5px; }
    #result { margin-top: 20px; font-size: 18px; }
    #error { margin-top: 10px; color: red; font-weight: bold; }
  </style>
</head>
<body>
  <h2>Weather Information App</h2>

  <input id="city" type="text" placeholder="Enter city name" />
  <button onclick="getWeather()">Get Weather</button>

  <div id="error"></div>
  <div id="result"></div>

  <script>
    async function getWeather() {
      const city = document.getElementById('city').value.trim();
      const result = document.getElementById('result');
      const error = document.getElementById('error');

      result.innerHTML = "";
      error.textContent = "";

      if (!city) {
        error.textContent = "Please enter a city name.";
        return;
      }

      const API_KEY = "5fd1f4ed6a42e9c1f2b0de5c6212bcf6";

      try {
        const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric`);
        const data = await res.json();

        if (data.cod !== 200) {
          error.textContent = "City not found!";
          return;
        }

        result.innerHTML = `
          <p><strong>Temperature:</strong> ${data.main.temp}Â°C</p>
          <p><strong>Humidity:</strong> ${data.main.humidity}%</p>
          <p><strong>Condition:</strong> ${data.weather[0].description}</p>
        `;

      } catch (err) {
        error.textContent = "Error fetching weather. Please try again.";
      }
    }
  </script>
</body>
</html>


<!-- Task 4: Post Loader with Delayed Promise
Objective: Simulate delayed data loading using Promises. -->

<!DOCTYPE html>
<html>
<head>
  <title>Post Loader with Delay</title>
  <style>
    body { font-family: Arial; max-width: 600px; margin: 30px auto; }
    #status { font-weight: bold; margin-bottom: 15px; }
    li { margin: 6px 0; }
    button { padding: 8px 12px; }
  </style>
</head>
<body>
  <h2>Post Loader (Delayed Promise)</h2>

  <button onclick="loadPosts()">Load Posts</button>
  <button onclick="loadPosts(true)">Retry</button>

  <div id="status"></div>
  <ul id="postList"></ul>

  <script>
    function getPosts(shouldFail = false) {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          if (shouldFail) {
            reject("Failed to load posts.");
          } else {
            resolve([
              "How to Learn JavaScript",
              "Understanding Promises",
              "Async & Await Simplified",
              "Frontend Tips for Beginners",
              "Mastering DOM Manipulation"
            ]);
          }
        }, 2000);
      });
    }

    async function loadPosts(retry = false) {
      const status = document.getElementById('status');
      const list = document.getElementById('postList');

      status.textContent = "Loading posts...";
      list.innerHTML = "";

      try {
        const posts = await getPosts(retry);
        status.textContent = "Posts Loaded:";
        posts.forEach(title => {
          list.innerHTML += `<li>${title}</li>`;
        });

      } catch (err) {
        status.textContent = err + " Click Retry.";
      }
    }
  </script>
</body>
</html>


<!-- Task 5: Product Search Filter
Objective: Combine async data fetching, event handling, and DOM manipulation.-->

<!DOCTYPE html>
<html>
<head>
  <title>Product Search Filter</title>
  <style>
    body { font-family: Arial; max-width: 900px; margin: 30px auto; }
    #search { width: 100%; padding: 10px; font-size: 16px; margin-bottom: 20px; }
    #grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
    }
    .card {
      border: 1px solid #ddd;
      padding: 10px;
      border-radius: 6px;
      background: #fafafa;
    }
    .title {
      font-weight: bold;
      margin-bottom: 5px;
    }
    .price { color: green; }
  </style>
</head>
<body>
  <h2>Product Search Filter</h2>

  <input id="search" type="text" placeholder="Search products..." />

  <div id="grid"></div>

  <script>
    let products = [];
    let timer;

    function debounce(fn, delay) {
      return () => {
        clearTimeout(timer);
        timer = setTimeout(fn, delay);
      };
    }

    async function fetchProducts() {
      const res = await fetch('https://fakestoreapi.com/products');
      products = await res.json();
      display(products);
    }

    function display(list) {
      const grid = document.getElementById('grid');
      grid.innerHTML = '';

      list.forEach(p => {
        grid.innerHTML += `
          <div class="card">
            <div class="title">${p.title}</div>
            <div class="price">$${p.price}</div>
          </div>
        `;
      });
    }

    function filterProducts() {
      const q = document.getElementById('search').value.toLowerCase();
      const filtered = products.filter(p => p.title.toLowerCase().includes(q));
      display(filtered);
    }

    document.getElementById('search').addEventListener('input', debounce(filterProducts, 300));

    fetchProducts();
  </script>
</body>
</html>


<!-- Task 6: Sequential Promise Execution
Objective: Demonstrate understanding of Promise chaining and async flow. -->

<!DOCTYPE html>
<html>
<head>
  <title>Sequential Promise Execution</title>
  <style>
    body { font-family: Arial; max-width: 600px; margin: 30px auto; }
    li { margin: 8px 0; }
    .active { font-weight: bold; color: blue; }
  </style>
</head>
<body>
  <h2>Sequential Promise Execution</h2>

  <button onclick="runSteps()">Start</button>

  <ul id="steps"></ul>

  <script>
    function step1() {
      return new Promise(resolve => {
        setTimeout(() => resolve("Step 1 done"), 1000);
      });
    }

    function step2() {
      return new Promise(resolve => {
        setTimeout(() => resolve("Step 2 done"), 1000);
      });
    }

    function step3() {
      return new Promise(resolve => {
        setTimeout(() => resolve("Step 3 done"), 1000);
      });
    }

    async function runSteps() {
      const ul = document.getElementById('steps');
      ul.innerHTML = "";

      let li1 = document.createElement('li');
      li1.textContent = "Running Step 1...";
      li1.classList.add('active');
      ul.appendChild(li1);
      li1.textContent = await step1();
      li1.classList.remove('active');

      let li2 = document.createElement('li');
      li2.textContent = "Running Step 2...";
      li2.classList.add('active');
      ul.appendChild(li2);
      li2.textContent = await step2();
      li2.classList.remove('active');

      let li3 = document.createElement('li');
      li3.textContent = "Running Step 3...";
      li3.classList.add('active');
      ul.appendChild(li3);
      li3.textContent = await step3();
      li3.classList.remove('active');
    }
  </script>
</body>
</html>


<!-- Task 7: Image Gallery Loader
Objective: Practice multiple async fetch calls and DOM updates. -->

<!DOCTYPE html>
<html>
<head>
  <title>Image Gallery Loader</title>
  <style>
    body { font-family: Arial; max-width: 900px; margin: 30px auto; }
    #grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 15px;
    }
    .imgBox {
      width: 100%;
      height: 180px;
      overflow: hidden;
      border-radius: 8px;
      opacity: 0;
      transition: opacity 0.6s ease; 
    }
    .imgBox img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    button {
      margin-top: 20px;
      padding: 10px 18px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h2>Image Gallery Loader</h2>

  <div id="grid"></div>

  <button onclick="loadImages()">Load More</button>

  <script>
    const ACCESS_KEY = "Dvb-OwCRi3jzcSL6Kg7UEpjCCqrjWsnIfXsX5gwPpEY"; 

    async function loadImages() {
      const res = await fetch(`https://api.unsplash.com/photos/random?count=6&client_id=${ACCESS_KEY}`);
      const images = await res.json();
      display(images);
    }

    function display(imgList) {
      const grid = document.getElementById('grid');

      imgList.forEach(img => {
        const box = document.createElement('div');
        box.className = 'imgBox';

        const im = document.createElement('img');
        im.src = img.urls.small;
        box.appendChild(im);

        grid.appendChild(box);

        setTimeout(() => box.style.opacity = 1, 50);
      });
    }

    loadImages();
  </script>
</body>
</html>
